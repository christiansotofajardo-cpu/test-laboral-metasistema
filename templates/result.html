<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Resultados – Test Laboral MetaSistema</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- ESTILOS METASISTEMA -->
  <link rel="stylesheet" href="/static/style.css">
</head>

<body>

  <div class="container">

    <h1>Test Laboral MetaSistema</h1>
    <p class="small">
      Resultados del perfil de personalidad (IPIP-100) y análisis de producción escrita
      basado en índices de PLN (TRUNAJOD – capa sensible).
    </p>

    <!-- ===================== -->
    <!-- BLOQUE IPIP -->
    <!-- ===================== -->
    <div class="card">
      <h2>Perfil de Personalidad (IPIP-100)</h2>

      <ul>
        {% for factor, score in avg_scores.items() %}
          <li>
            <strong>{{ factor_labels[factor] }}:</strong>
            {{ score if score is not none else "—" }}
          </li>
        {% endfor %}
      </ul>
    </div>

    <!-- ===================== -->
    <!-- TEXTO FUNCIONAL -->
    <!-- ===================== -->
    <div class="card">
      <h2>Producción Escrita – Texto Funcional</h2>

      <p class="small"><strong>Texto:</strong></p>
      <p>{{ texto_funcional }}</p>

      <p class="small">
        <strong>Coherencia:</strong> {{ analisis_discursivo.scores_sensibles.funcional.coherencia }} /
        <strong>Relevancia:</strong> {{ analisis_discursivo.scores_sensibles.funcional.relevancia }} /
        <strong>Registro:</strong> {{ analisis_discursivo.scores_sensibles.funcional.registro }} /
        <strong>Desarrollo:</strong> {{ analisis_discursivo.scores_sensibles.funcional.desarrollo }}
      </p>

      <p>
        <strong>Score global:</strong>
        {{ analisis_discursivo.scores_sensibles.funcional.global }}
      </p>
    </div>

    <!-- ===================== -->
    <!-- TEXTO SITUACIONAL -->
    <!-- ===================== -->
    <div class="card">
      <h2>Producción Escrita – Texto Situacional</h2>

      <p class="small"><strong>Texto:</strong></p>
      <p>{{ texto_situacional }}</p>

      <p class="small">
        <strong>Coherencia:</strong> {{ analisis_discursivo.scores_sensibles.situacional.coherencia }} /
        <strong>Relevancia:</strong> {{ analisis_discursivo.scores_sensibles.situacional.relevancia }} /
        <strong>Registro:</strong> {{ analisis_discursivo.scores_sensibles.situacional.registro }} /
        <strong>Desarrollo:</strong> {{ analisis_discursivo.scores_sensibles.situacional.desarrollo }}
      </p>

      <p>
        <strong>Score global:</strong>
        {{ analisis_discursivo.scores_sensibles.situacional.global }}
      </p>
    </div>

    <!-- ===================== -->
    <!-- SCORE GENERAL -->
    <!-- ===================== -->
    <div class="card">
      <h2>Resultado Global</h2>

      <p>
        <strong>Score TRU-sensible promedio:</strong>
        {{ analisis_discursivo.scores_sensibles.global_promedio }}
      </p>

      <p class="small">
        Este resultado integra coherencia, ajuste a consigna, registro y desarrollo
        discursivo. No corresponde aún a una interpretación MetaSistema completa.
      </p>
    </div>

    <!-- ===================== -->
    <!-- DIAGNÓSTICO TÉCNICO -->
    <!-- ===================== -->
    <div class="card">
      <h2>Estado Técnico</h2>

      <p class="small">
        TRUNAJOD configurado:
        {{ analisis_discursivo.meta.trunajod_endpoint_configurado }}<br>
        TRUNAJOD OK (funcional):
        {{ analisis_discursivo.meta.trunajod_ok_funcional }}<br>
        TRUNAJOD OK (situacional):
        {{ analisis_discursivo.meta.trunajod_ok_situacional }}
      </p>
    </div>

  </div>

</body>
</html>
